<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="bun test" tests="38" assertions="96" failures="0" skipped="0" time="0.022387">
  <testsuite name="tests/ab-variant-e2e.test.ts" file="tests/ab-variant-e2e.test.ts" tests="38" assertions="96" failures="0" skipped="0" time="0" hostname="Mac.attlocal.net">
    <testsuite name="A/B Variant Cookies - E2E Tests" file="tests/ab-variant-e2e.test.ts" line="11" tests="16" assertions="40" failures="0" skipped="0" time="0" hostname="Mac.attlocal.net">
      <testsuite name="Cookie Parsing" file="tests/ab-variant-e2e.test.ts" line="46" tests="5" assertions="11" failures="0" skipped="0" time="0" hostname="Mac.attlocal.net">
        <testcase name="should parse ab-variant-a cookie" classname="Cookie Parsing &amp;gt; A/B Variant Cookies - E2E Tests" time="0.000586" file="tests/ab-variant-e2e.test.ts" line="47" assertions="2" />
        <testcase name="should parse ab-variant-b cookie" classname="Cookie Parsing &amp;gt; A/B Variant Cookies - E2E Tests" time="0.000129" file="tests/ab-variant-e2e.test.ts" line="57" assertions="2" />
        <testcase name="should parse multiple cookies" classname="Cookie Parsing &amp;gt; A/B Variant Cookies - E2E Tests" time="0.000124" file="tests/ab-variant-e2e.test.ts" line="67" assertions="3" />
        <testcase name="should handle URL-encoded cookies" classname="Cookie Parsing &amp;gt; A/B Variant Cookies - E2E Tests" time="0.000089" file="tests/ab-variant-e2e.test.ts" line="78" assertions="2" />
        <testcase name="should fallback to default when no cookie" classname="Cookie Parsing &amp;gt; A/B Variant Cookies - E2E Tests" time="0.00009" file="tests/ab-variant-e2e.test.ts" line="88" assertions="2" />
      </testsuite>
      <testsuite name="Pool Size" file="tests/ab-variant-e2e.test.ts" line="97" tests="2" assertions="4" failures="0" skipped="0" time="0" hostname="Mac.attlocal.net">
        <testcase name="should use default pool size (prefix filter excludes poolSize)" classname="Pool Size &amp;gt; A/B Variant Cookies - E2E Tests" time="0.000082" file="tests/ab-variant-e2e.test.ts" line="98" assertions="2" />
        <testcase name="should use default pool size when not specified" classname="Pool Size &amp;gt; A/B Variant Cookies - E2E Tests" time="0.000088" file="tests/ab-variant-e2e.test.ts" line="109" assertions="2" />
      </testsuite>
      <testsuite name="Session Management" file="tests/ab-variant-e2e.test.ts" line="120" tests="2" assertions="6" failures="0" skipped="0" time="0" hostname="Mac.attlocal.net">
        <testcase name="should generate session ID when missing" classname="Session Management &amp;gt; A/B Variant Cookies - E2E Tests" time="0.000098" file="tests/ab-variant-e2e.test.ts" line="121" assertions="3" />
        <testcase name="should not expose session ID in prefixed cookies (security)" classname="Session Management &amp;gt; A/B Variant Cookies - E2E Tests" time="0.0001" file="tests/ab-variant-e2e.test.ts" line="132" assertions="3" />
      </testsuite>
      <testsuite name="Performance" file="tests/ab-variant-e2e.test.ts" line="147" tests="2" assertions="7" failures="0" skipped="0" time="0.003" hostname="Mac.attlocal.net">
        <testcase name="should handle 100 requests in &lt;500ms" classname="Performance &amp;gt; A/B Variant Cookies - E2E Tests" time="0.003914" file="tests/ab-variant-e2e.test.ts" line="148" assertions="3" />
        <testcase name="should handle concurrent requests" classname="Performance &amp;gt; A/B Variant Cookies - E2E Tests" time="0.000441" file="tests/ab-variant-e2e.test.ts" line="168" assertions="4" />
      </testsuite>
      <testsuite name="Edge Cases" file="tests/ab-variant-e2e.test.ts" line="190" tests="4" assertions="8" failures="0" skipped="0" time="0" hostname="Mac.attlocal.net">
        <testcase name="should handle empty cookie header" classname="Edge Cases &amp;gt; A/B Variant Cookies - E2E Tests" time="0.000089" file="tests/ab-variant-e2e.test.ts" line="191" assertions="2" />
        <testcase name="should handle malformed cookies" classname="Edge Cases &amp;gt; A/B Variant Cookies - E2E Tests" time="0.000085" file="tests/ab-variant-e2e.test.ts" line="201" assertions="2" />
        <testcase name="should handle very long cookie values" classname="Edge Cases &amp;gt; A/B Variant Cookies - E2E Tests" time="0.0001" file="tests/ab-variant-e2e.test.ts" line="211" assertions="2" />
        <testcase name="should handle special characters in values" classname="Edge Cases &amp;gt; A/B Variant Cookies - E2E Tests" time="0.000078" file="tests/ab-variant-e2e.test.ts" line="222" assertions="2" />
      </testsuite>
      <testsuite name="Security" file="tests/ab-variant-e2e.test.ts" line="233" tests="1" assertions="4" failures="0" skipped="0" time="0" hostname="Mac.attlocal.net">
        <testcase name="should only parse prefixed cookies" classname="Security &amp;gt; A/B Variant Cookies - E2E Tests" time="0.000078" file="tests/ab-variant-e2e.test.ts" line="234" assertions="4" />
      </testsuite>
    </testsuite>
    <testsuite name="A/B Cookie Utils" file="tests/ab-variant-e2e.test.ts" line="248" tests="6" assertions="20" failures="0" skipped="0" time="0" hostname="Mac.attlocal.net">
      <testcase name="should parse cookies with prefix filter" classname="A/B Cookie Utils" time="0.00003" file="tests/ab-variant-e2e.test.ts" line="249" assertions="4" />
      <testcase name="should extract A/B variant with fallback" classname="A/B Cookie Utils" time="0" file="tests/ab-variant-e2e.test.ts" line="259" assertions="2" />
      <testcase name="should get pool size with fallback (prefix filtered)" classname="A/B Cookie Utils" time="0" file="tests/ab-variant-e2e.test.ts" line="271" assertions="2" />
      <testcase name="should format Set-Cookie header" classname="A/B Cookie Utils" time="0.000075" file="tests/ab-variant-e2e.test.ts" line="283" assertions="6" />
      <testcase name="should check Col-89 width" classname="A/B Cookie Utils" time="0" file="tests/ab-variant-e2e.test.ts" line="301" assertions="4" />
      <testcase name="should wrap text to Col-89 (or preserve if Bun unavailable)" classname="A/B Cookie Utils" time="0" file="tests/ab-variant-e2e.test.ts" line="310" assertions="2" />
    </testsuite>
    <testsuite name="API Server A/B Integration" file="tests/ab-variant-e2e.test.ts" line="325" tests="16" assertions="36" failures="0" skipped="0" time="0" hostname="Mac.attlocal.net">
      <testsuite name="Enhanced AB Endpoints" file="tests/ab-variant-e2e.test.ts" line="488" tests="6" assertions="14" failures="0" skipped="0" time="0" hostname="Mac.attlocal.net">
        <testcase name="should return variant with source field" classname="Enhanced AB Endpoints &amp;gt; API Server A/B Integration" time="0.000471" file="tests/ab-variant-e2e.test.ts" line="489" assertions="4" />
        <testcase name="should fallback to default when no cookie" classname="Enhanced AB Endpoints &amp;gt; API Server A/B Integration" time="0.000142" file="tests/ab-variant-e2e.test.ts" line="500" assertions="2" />
        <testcase name="should snapshot with default zstd format" classname="Enhanced AB Endpoints &amp;gt; API Server A/B Integration" time="0.000325" file="tests/ab-variant-e2e.test.ts" line="507" assertions="4" />
        <testcase name="should snapshot with deflate format" classname="Enhanced AB Endpoints &amp;gt; API Server A/B Integration" time="0.000157" file="tests/ab-variant-e2e.test.ts" line="518" assertions="2" />
        <testcase name="should snapshot with gzip format" classname="Enhanced AB Endpoints &amp;gt; API Server A/B Integration" time="0.000134" file="tests/ab-variant-e2e.test.ts" line="527" assertions="1" />
        <testcase name="should reject invalid snapshot format" classname="Enhanced AB Endpoints &amp;gt; API Server A/B Integration" time="0.000122" file="tests/ab-variant-e2e.test.ts" line="535" assertions="1" />
      </testsuite>
      <testsuite name="Multi-Tenant Endpoint" file="tests/ab-variant-e2e.test.ts" line="541" tests="3" assertions="8" failures="0" skipped="0" time="0" hostname="Mac.attlocal.net">
        <testcase name="should resolve tenant from X-Tenant-ID header" classname="Multi-Tenant Endpoint &amp;gt; API Server A/B Integration" time="0.000177" file="tests/ab-variant-e2e.test.ts" line="542" assertions="4" />
        <testcase name="should resolve tenant from query param when header provided" classname="Multi-Tenant Endpoint &amp;gt; API Server A/B Integration" time="0.000114" file="tests/ab-variant-e2e.test.ts" line="556" assertions="2" />
        <testcase name="should resolve tenant from path when no header" classname="Multi-Tenant Endpoint &amp;gt; API Server A/B Integration" time="0.000179" file="tests/ab-variant-e2e.test.ts" line="568" assertions="2" />
      </testsuite>
      <testsuite name="WebSocket Sub-Protocol" file="tests/ab-variant-e2e.test.ts" line="577" tests="5" assertions="11" failures="0" skipped="0" time="0" hostname="Mac.attlocal.net">
        <testcase name="should upgrade with ab-events protocol" classname="WebSocket Sub-Protocol &amp;gt; API Server A/B Integration" time="0.00023" file="tests/ab-variant-e2e.test.ts" line="578" assertions="2" />
        <testcase name="should upgrade with ab-metrics protocol" classname="WebSocket Sub-Protocol &amp;gt; API Server A/B Integration" time="0.000161" file="tests/ab-variant-e2e.test.ts" line="589" assertions="2" />
        <testcase name="should accept unknown protocol and default to ab-events" classname="WebSocket Sub-Protocol &amp;gt; API Server A/B Integration" time="0.000133" file="tests/ab-variant-e2e.test.ts" line="600" assertions="2" />
        <testcase name="should respond to ping messages" classname="WebSocket Sub-Protocol &amp;gt; API Server A/B Integration" time="0.000397" file="tests/ab-variant-e2e.test.ts" line="611" assertions="2" />
        <testcase name="should stream variant events to ab-events subscribers" classname="WebSocket Sub-Protocol &amp;gt; API Server A/B Integration" time="0.000355" file="tests/ab-variant-e2e.test.ts" line="631" assertions="3" />
      </testsuite>
      <testsuite name="Metrics Aggregation" file="tests/ab-variant-e2e.test.ts" line="656" tests="2" assertions="3" failures="0" skipped="0" time="0" hostname="Mac.attlocal.net">
        <testcase name="should track impressions via /api/ab/status polling endpoint" classname="Metrics Aggregation &amp;gt; API Server A/B Integration" time="0.000411" file="tests/ab-variant-e2e.test.ts" line="657" assertions="2" />
        <testcase name="should count tenant-specific metrics" classname="Metrics Aggregation &amp;gt; API Server A/B Integration" time="0.000267" file="tests/ab-variant-e2e.test.ts" line="673" assertions="1" />
      </testsuite>
    </testsuite>
  </testsuite>
</testsuites>
